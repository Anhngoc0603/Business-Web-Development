<!DOCTYPE html>
<html>
<head>
    <title>Dom3 - Ánh Ngọc</title>
    <script type="text/javascript">
        datasets = [
            {
                    ID:"P01",
                    Name:"Coca",
                    Quantity:2,
                    Price:15,
                    Photo:"coca.jpg"
                },
                {
                    ID:"P02",
                    Name:"Pepsi",
                    Quantity:2,
                    Price:15,
                    Photo:"pepsi.jpg"
                },
                {
                    ID:"P03",
                    Name:"Sevenup",
                    Quantity:2,
                    Price:15,
                    Photo:"sevenup.jpg"
                },
                {
                    ID:"P04",
                    Name:"Fanta",
                    Quantity:2,
                    Price:15,
                    Photo:"fanta.jpg"
                },
                {
                    ID:"P05",
                    Name:"Sting",
                    Quantity:2,
                    Price:15,
                    Photo:"sting.jpg"
                }
        ];
    </script>
</head>
<body>
   <table border="1">
            <caption>List of products:</caption>
            <thead>
            <tr style="background-color:yellow">
                <th>ID</th>
                <th>Name</th>
                <th>Quantity</th>
                <th>Price</th>
                <th>Photo</th>
                <th>Action</th>
            </tr>
            </thead>
            <tbody id="product_tbody">

            </tbody>
        </table>
        <script type="text/javascript">
            product_tbody=document.getElementById("product_tbody")
            //alert(datasets.length)
            for(i=0;i<datasets.length;i++)
            {
                item=datasets[i]
                //step1: create a tr
                row=document.createElement("tr")
                td_id=document.createElement("td")
                td_name=document.createElement("td")
                td_quantity=document.createElement("td")
                td_price=document.createElement("td")
                td_photo=document.createElement("td")
                td_action=document.createElement("td")
                //step2: assign value for item html element:
                td_id.innerText=item.ID
                td_name.innerText=item.Name
                td_quantity.innerText=item.Quantity
                td_price.innerText=item.Price
                
                img=document.createElement("img")
                img.setAttribute("src","../images/"+item.Photo)
                img.setAttribute("width","100")
                img.setAttribute("height","150")
                img.setAttribute("title","Click here to view detail")
                td_photo.appendChild(img)
                

                ic_edit=document.createElement("img")
                ic_edit.setAttribute("src","../images/edit.png")
                ic_edit.setAttribute("width","20")
                ic_edit.setAttribute("title","Edit details")
                ic_edit.setAttribute("style","cursor:pointer")
                td_action.appendChild(ic_edit)

                ic_detail=document.createElement("img")
                ic_detail.setAttribute("src","../images/detail.png")
                ic_detail.setAttribute("width","20")
                ic_detail.setAttribute("title","View details")
                ic_detail.setAttribute("style","cursor:pointer")
                td_action.appendChild(ic_detail)
                ic_detail.item_product=item
                ic_detail.onclick=function()
                {
                    //we need to convert json object into json string
                    jsonstring=JSON.stringify(this.item_product)
                    //use localstorage for saving:
                    localStorage.setItem("selected_product",jsonstring)
                    //open detail.html
                    window.open("detail.html","_blank")
                }

                ic_delete=document.createElement("img")
                ic_delete.setAttribute("src","../images/delete.png")
                ic_delete.setAttribute("width","20")
                ic_delete.setAttribute("title","Delete product")
                ic_delete.setAttribute("style","cursor:pointer")
                td_action.appendChild(ic_delete)
                //create an attribute for ic_delete:
                ic_delete.my_row_parent=row
                //adding an event for ic_delete
                ic_delete.onclick=function()
                {
                    if(confirm("muốn xóa hả?"))
                {
                    parent_row=this.my_row_parent
                    alert("OK, tui sẽ xóa:"+parent_row.childNodes[1].innerText)
                    product_tbody.removeChild(parent_row)
                }
                }
                //step3:
                row.appendChild(td_id)
                row.appendChild(td_name)
                row.appendChild(td_quantity)
                row.appendChild(td_price)
                row.appendChild(td_photo)
                row.appendChild(td_action)

                //step 4:attach tr(row)
                product_tbody.appendChild(row);
            }
        </script>
</body>
</html>